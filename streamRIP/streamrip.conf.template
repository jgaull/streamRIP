error_log /var/log/nginx/error.log info;

events {
  worker_connections 1024;
}

rtmp {
	server {
		listen 1935;
		ping 1s;
		ping_timeout 5s;
		chunk_size 4096;
		
		exec_static {{destinationPath}}/nginx_start.sh;

		application live {
			live on;
			idle_streams off;
			drop_idle_publisher 5s;

			exec_publish {{destinationPath}}/publish_start.sh;
			exec_publish_done {{destinationPath}}/publish_stop.sh;
		}
	}
}